<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø³Ø¨Ø§Ù‚ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ø¯ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…</title>

<style>
  body{margin:0;font-family:Tahoma, Arial;background:#071c1b;color:#fff}
  .wrap{max-width:980px;margin:auto;padding:20px;text-align:center}
  .card{background:#0e2a28;border-radius:20px;padding:20px;margin-top:18px;box-shadow:0 20px 60px rgba(0,0,0,.25)}
  .muted{color:rgba(255,255,255,.7)}
  .waiting{border:2px dashed #22c55e;color:#22c55e;border-radius:14px;padding:14px;margin:12px 0}
  .row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;align-items:center}
  .timer{font-size:64px;margin:14px 0;font-weight:800;letter-spacing:1px}
  input{padding:14px;width:min(520px,100%);border-radius:12px;border:0;font-size:18px;text-align:center}
  button{padding:12px 18px;border-radius:12px;border:0;font-size:16px;cursor:pointer;margin:6px;min-width:150px}
  .primary{background:#f59e0b;font-weight:800;color:#111}
  .green{background:#22c55e;color:#111;font-weight:800}
  .red{background:#ef4444;color:#fff;font-weight:800}
  .gray{background:rgba(255,255,255,.14);color:#fff;border:1px solid rgba(255,255,255,.18);font-weight:700}
  .disabled{opacity:.55;cursor:not-allowed}
  .qBox{margin-top:14px;text-align:right;background:rgba(0,0,0,.18);border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:14px}
  .qTop{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
  .pill{padding:6px 10px;border-radius:999px;font-size:12px;background:rgba(34,197,94,.18);border:1px solid rgba(34,197,94,.35);color:#22c55e;white-space:nowrap}
  .option{background:#083331;margin:8px 0;padding:12px;border-radius:12px;cursor:pointer;user-select:none;border:1px solid rgba(255,255,255,.08)}
  .option:hover{background:#115e59}
  .option.active{background:#22c55e;color:#061615;font-weight:800}
  .hidden{display:none}
  .split{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
  @media(min-width:900px){.split{grid-template-columns:1.1fr .9fr}}
  .panel{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:12px;text-align:right}
  .list{max-height:260px;overflow:auto;padding:8px;border-radius:12px;background:rgba(0,0,0,.14)}
  .rRow{display:flex;justify-content:space-between;gap:10px;padding:8px 8px;border-bottom:1px solid rgba(255,255,255,.08);font-size:14px}
  .rRow:last-child{border-bottom:0}
  .center{text-align:center}
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>

<body>
<div class="wrap">
  <h1>Ø³Ø¨Ø§Ù‚ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ø¯ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…</h1>
  <p class="muted">Ù…Ø³Ø§Ø¨Ù‚Ø© ØªÙØ§Ø¹Ù„ÙŠØ© â€” Ù„Ø¬Ù†Ø© Ù…Ù†Ø§Ø¨Ø± Ø§Ù„Ù†ÙˆØ± Ø¨Ø§Ù„Ø¬ÙØ±</p>

  <div class="card">
    <div id="waiting" class="waiting">â³ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø¨Ø§Ù‚ Ù…Ù† Ø§Ù„Ù…Ù†Ø¸Ù…</div>

    <div id="playerBox" class="center">
      <input id="name" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" autocomplete="off">
      <div class="muted" style="margin-top:8px">Ø§Ø¶ØºØ· ØªØ³Ø¬ÙŠÙ„ Ø¨Ø¹Ø¯ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…</div>
      <button id="joinBtn" class="primary" onclick="join()">ØªØ³Ø¬ÙŠÙ„</button>
    </div>

    <div class="timer" id="timer">00:00</div>

    <div class="split">
      <div>
        <div id="questionBox" class="qBox hidden">
          <div class="qTop">
            <div class="pill" id="qPill">Ø³Ø¤Ø§Ù„ 0 / 0</div>
            <div class="pill" id="statusPill">Ø¬Ø§Ù‡Ø²</div>
          </div>
          <h3 id="qText" style="margin:12px 0 8px"></h3>
          <div id="choices"></div>

          <div class="row" style="margin-top:8px">
            <button class="gray" id="prevBtn" onclick="prevQ()">â¬… Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
            <button class="gray" id="nextBtn" onclick="nextQ()">Ø§Ù„ØªØ§Ù„ÙŠ â¡</button>
            <button class="green" id="finishBtn" onclick="finishQuiz()">ğŸ Ø¥Ù†Ù‡Ø§Ø¡</button>
          </div>

          <div class="muted" style="font-size:13px;margin-top:10px;line-height:1.7">
            ğŸ”¥ Ø§Ù„ØªØ±ØªÙŠØ¨ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰: (Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©) Ø«Ù… (Ø§Ù„Ø£Ø³Ø±Ø¹).<br>
            âœ… ÙˆÙ‚ØªÙƒ ÙŠØ¨Ø¯Ø£ Ù„Ø­Ø¸Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø¨Ø§Ù‚ Ù…Ù† Ø§Ù„Ù…Ù†Ø¸Ù….
          </div>
        </div>

        <div id="doneBox" class="qBox hidden center">
          <h2 style="margin:6px 0">ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© âœ…</h2>
          <div class="muted" id="myResult"></div>
        </div>
      </div>

      <div class="panel">
        <div class="qTop">
          <div style="font-weight:800">ğŸ† Ø§Ù„ØªØ±ØªÙŠØ¨ (Ù„Ø§ÙŠÙ)</div>
          <div class="pill" id="rankCount">0 Ù„Ø§Ø¹Ø¨</div>
        </div>
        <div class="list" id="rankList">
          <div class="muted" style="padding:8px">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø¨Ø¹Ø¯â€¦</div>
        </div>
        <div class="muted" style="font-size:12px;margin-top:10px;line-height:1.7">
          âš ï¸ ÙŠØ¸Ù‡Ø± Ø§Ù„Ø§Ø³Ù… ÙÙŠ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ â€œØ¥Ù†Ù‡Ø§Ø¡â€.
        </div>
      </div>
    </div>

    <div id="adminBox" class="qBox hidden">
      <div class="row">
        <button class="green" onclick="startRace()">â–¶ Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø¨Ø§Ù‚</button>
        <button class="gray" onclick="togglePause()" id="pauseBtn">â¸ Ø¥ÙŠÙ‚Ø§Ù / Ù…ØªØ§Ø¨Ø¹Ø©</button>
        <button class="red" onclick="resetRace()">â™» ØªØµÙÙŠØ±</button>
        <button class="primary" onclick="seedQuestions()">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</button>
        <button class="gray" onclick="clearAnswers()">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
      </div>
      <div class="muted" style="font-size:12px;margin-top:8px;line-height:1.7">
        ğŸ“¥ â€œØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©â€ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·.<br>
        ğŸ§¹ â€œÙ…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬â€ ÙŠÙ…Ø³Ø­ Collection answers (Ù„Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©).
      </div>
    </div>
  </div>

  <div class="muted" style="margin-top:10px;font-size:13px">
    Â«Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù†Ø§ ØªÙˆÙÙŠÙ‚ Ø§Ù„Ø·Ø§Ø¹Ø©ØŒ ÙˆØ¨Ø¹Ø¯ Ø§Ù„Ù…Ø¹ØµÙŠØ©ØŒ ÙˆØµØ¯Ù‚ Ø§Ù„Ù†ÙŠØ©Â» â€” Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ø¯ (Ø¹)
  </div>
</div>

<script>
/* ================= Firebase Config ================= */
firebase.initializeApp({
  apiKey: "AIzaSyCXRjGFao0aRxTU1zPnM80-I7NW5YP-yBM",
  authDomain: "jawad-race.firebaseapp.com",
  projectId: "jawad-race"
});
const db = firebase.firestore();

/* ================= Refs ================= */
const RACE_ID = "current";
const raceRef = db.collection("races").doc(RACE_ID);
const playersRef = db.collection("players");
const questionsRef = db.collection("questions");
const answersRef = db.collection("answers");

/* ================= UI ================= */
const isAdmin = new URLSearchParams(location.search).get("admin")==="1";
if(isAdmin) document.getElementById("adminBox").classList.remove("hidden");

const waitingEl = document.getElementById("waiting");
const playerBox = document.getElementById("playerBox");
const joinBtn = document.getElementById("joinBtn");
const timerEl = document.getElementById("timer");

const questionBox = document.getElementById("questionBox");
const doneBox = document.getElementById("doneBox");
const myResult = document.getElementById("myResult");

const qPill = document.getElementById("qPill");
const statusPill = document.getElementById("statusPill");
const qText = document.getElementById("qText");
const choicesBox = document.getElementById("choices");

const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const finishBtn = document.getElementById("finishBtn");

const rankCount = document.getElementById("rankCount");
const rankList = document.getElementById("rankList");

const pauseBtn = document.getElementById("pauseBtn");

/* ================= State ================= */
let tickInterval=null;
let raceStartMs=null;
let paused=false;

let questions=[];
let index=0;
let selected = {}; // {order: selectedIndex}
let playerId = localStorage.getItem("jawad_playerId") || null;
let playerName = localStorage.getItem("jawad_playerName") || null;

function fmt(ms){
  const total = Math.max(0, Math.floor(ms/1000));
  const m = String(Math.floor(total/60)).padStart(2,"0");
  const s = String(total%60).padStart(2,"0");
  return `${m}:${s}`;
}
function stopTick(){ if(tickInterval){clearInterval(tickInterval); tickInterval=null;} }
function startTick(){
  stopTick();
  const update = ()=>{
    if(!raceStartMs) return;
    if(paused) return;
    timerEl.textContent = fmt(Date.now()-raceStartMs);
  };
  update();
  tickInterval=setInterval(update,250);
}

/* ================= Player Join ================= */
async function join(){
  const name = (document.getElementById("name").value||"").trim();
  if(name.length<5){ alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­"); return; }

  joinBtn.disabled=true;
  joinBtn.classList.add("disabled");

  // Create player doc
  const doc = await playersRef.add({
    name,
    raceId:RACE_ID,
    joinedAt: firebase.firestore.FieldValue.serverTimestamp()
  });

  playerId = doc.id;
  playerName = name;
  localStorage.setItem("jawad_playerId", playerId);
  localStorage.setItem("jawad_playerName", playerName);

  document.getElementById("name").disabled=true;
  playerBox.querySelector(".muted").textContent="âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ â€” Ø§Ù†ØªØ¸Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø¨Ø§Ù‚";
}
window.join = join;

/* ================= Load Questions ================= */
async function loadQuestions(){
  const snap = await questionsRef.orderBy("order").get();
  questions = snap.docs.map(d => d.data());
  if(!questions.length){
    statusPill.textContent = "âš  Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© (Ø§Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù…Ù†Ø¸Ù… ØªØ­Ù…ÙŠÙ„Ù‡Ø§)";
    return;
  }
  questionBox.classList.remove("hidden");
  doneBox.classList.add("hidden");
  index=0;
  showQ();
}

function showQ(){
  const q = questions[index];
  qPill.textContent = `Ø³Ø¤Ø§Ù„ ${index+1} / ${questions.length}`;
  qText.textContent = q.text;

  choicesBox.innerHTML = "";
  q.choices.forEach((c,i)=>{
    const div = document.createElement("div");
    div.className="option";
    div.textContent=c;
    if(selected[q.order]===i) div.classList.add("active");
    div.onclick=()=>{
      selected[q.order]=i;
      [...choicesBox.children].forEach(x=>x.classList.remove("active"));
      div.classList.add("active");
      statusPill.textContent="âœ… ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø©";
    };
    choicesBox.appendChild(div);
  });

  prevBtn.disabled = index===0;
  nextBtn.disabled = index===questions.length-1;
}
function nextQ(){ if(index<questions.length-1){index++;showQ();} }
function prevQ(){ if(index>0){index--;showQ();} }
window.nextQ=nextQ; window.prevQ=prevQ;

/* ================= Finish Quiz ================= */
async function finishQuiz(){
  if(!playerId || !playerName){
    alert("Ø³Ø¬Ù‘Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ù‹Ø§");
    return;
  }
  if(!raceStartMs){
    alert("Ø§Ù„Ø³Ø¨Ø§Ù‚ Ù„Ù… ÙŠØ¨Ø¯Ø£ Ø¨Ø¹Ø¯");
    return;
  }
  // Validate: all answered
  const unanswered = questions.filter(q => selected[q.order] === undefined);
  if(unanswered.length){
    alert(`Ø¨Ø§Ù‚ÙŠ ${unanswered.length} Ø³Ø¤Ø§Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ø¬Ø§Ø¨Ø©`);
    return;
  }

  const elapsedMs = Date.now() - raceStartMs;

  // Score
  let correct=0;
  questions.forEach(q=>{
    if(selected[q.order] === q.correctIndex) correct++;
  });

  // Save result
  await answersRef.doc(playerId).set({
    playerId,
    name: playerName,
    raceId: RACE_ID,
    correct,
    total: questions.length,
    elapsedMs,
    finishedAt: firebase.firestore.FieldValue.serverTimestamp()
  }, {merge:true});

  questionBox.classList.add("hidden");
  doneBox.classList.remove("hidden");
  myResult.innerHTML = `Ø¯Ø±Ø¬ØªÙƒ: <b>${correct}/${questions.length}</b> â€” ÙˆÙ‚ØªÙƒ: <b>${fmt(elapsedMs)}</b><br><span class="muted">Ø§Ù†ØªØ¸Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ±ØªÙŠØ¨â€¦</span>`;
}
window.finishQuiz=finishQuiz;

/* ================= Live Leaderboard ================= */
answersRef
  .where("raceId","==",RACE_ID)
  .onSnapshot((snap)=>{
    const arr=[];
    snap.forEach(d=>arr.push(d.data()));

    // sort: correct desc, elapsed asc
    arr.sort((a,b)=>{
      if((b.correct||0)!==(a.correct||0)) return (b.correct||0)-(a.correct||0);
      return (a.elapsedMs||9e15)-(b.elapsedMs||9e15);
    });

    rankCount.textContent = `${arr.length} Ù„Ø§Ø¹Ø¨`;

    if(!arr.length){
      rankList.innerHTML = `<div class="muted" style="padding:8px">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø¨Ø¹Ø¯â€¦</div>`;
      return;
    }

    rankList.innerHTML="";
    arr.forEach((r,i)=>{
      const row=document.createElement("div");
      row.className="rRow";
      row.innerHTML = `<div>${i+1}) ${r.name}</div><div class="muted">${r.correct}/${r.total} â€” ${fmt(r.elapsedMs||0)}</div>`;
      rankList.appendChild(row);
    });

    // update my rank if finished
    if(playerId){
      const myIndex = arr.findIndex(x => x.playerId === playerId);
      if(myIndex>=0 && doneBox.classList.contains("hidden")==false){
        myResult.innerHTML = myResult.innerHTML.replace(/Ø§Ù†ØªØ¸Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ±ØªÙŠØ¨â€¦/g, `ØªØ±ØªÙŠØ¨Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: <b>#${myIndex+1}</b>`);
      }
    }
  });

/* ================= Race State ================= */
raceRef.onSnapshot(async (doc)=>{
  if(!doc.exists){
    await raceRef.set({status:"waiting", paused:false, startAt:null, updatedAt: firebase.firestore.FieldValue.serverTimestamp()});
    return;
  }
  const d = doc.data();
  paused = !!d.paused;

  if(isAdmin){
    pauseBtn.textContent = paused ? "â–¶ Ù…ØªØ§Ø¨Ø¹Ø©" : "â¸ Ø¥ÙŠÙ‚Ø§Ù / Ù…ØªØ§Ø¨Ø¹Ø©";
  }

  if(d.status==="waiting"){
    waitingEl.style.display="block";
    timerEl.textContent="00:00";
    raceStartMs=null;
    stopTick();
    questionBox.classList.add("hidden");
    doneBox.classList.add("hidden");
    statusPill.textContent="Ø¬Ø§Ù‡Ø²";
    return;
  }

  if(d.status==="running"){
    waitingEl.style.display="none";
    const startAt = d.startAt?.toDate ? d.startAt.toDate().getTime() : Date.now();
    raceStartMs = startAt;
    startTick();
    // load questions when running
    loadQuestions();
  }
});

/* ================= Admin Controls ================= */
async function startRace(){
  await raceRef.set({
    status:"running",
    paused:false,
    startAt: firebase.firestore.FieldValue.serverTimestamp(),
    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
  }, {merge:true});
}
async function resetRace(){
  await raceRef.set({
    status:"waiting",
    paused:false,
    startAt:null,
    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
  }, {merge:true});
}
async function togglePause(){
  const doc = await raceRef.get();
  const p = !!doc.data()?.paused;
  await raceRef.set({paused: !p, updatedAt: firebase.firestore.FieldValue.serverTimestamp()}, {merge:true});
}
window.startRace=startRace; window.resetRace=resetRace; window.togglePause=togglePause;

/* ================= Admin: Seed Questions ================= */
async function seedQuestions(){
  const qs=[
    {order:1,text:"Ø£ÙŠÙ† ÙˆÙÙ„Ø¯ Ø§Ù„Ø¥Ù…Ø§Ù… Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¬ÙˆØ§Ø¯ (Ø¹)ØŸ",choices:["Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©","Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©","Ø§Ù„ÙƒÙˆÙØ©","Ø¯Ù…Ø´Ù‚"],correctIndex:0},
    {order:2,text:"Ù…Ù† Ù‡Ùˆ ÙˆØ§Ù„Ø¯ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ø¯ (Ø¹)ØŸ",choices:["Ø§Ù„Ø¥Ù…Ø§Ù… Ù…ÙˆØ³Ù‰ Ø§Ù„ÙƒØ§Ø¸Ù… (Ø¹)","Ø§Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ Ø§Ù„Ø±Ø¶Ø§ (Ø¹)","Ø§Ù„Ø¥Ù…Ø§Ù… Ø¬Ø¹ÙØ± Ø§Ù„ØµØ§Ø¯Ù‚ (Ø¹)","Ø§Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ Ø§Ù„Ù‡Ø§Ø¯ÙŠ (Ø¹)"],correctIndex:1},
    {order:3,text:"ÙÙŠ Ø£ÙŠ Ø¹Ù…Ø±Ù ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ ØªÙˆÙ„Ù‘Ù‰ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ø¯ (Ø¹) Ø§Ù„Ø¥Ù…Ø§Ù…Ø©ØŸ",choices:["Ø­ÙˆØ§Ù„ÙŠ 8 Ø³Ù†ÙˆØ§Øª","Ø­ÙˆØ§Ù„ÙŠ 15 Ø³Ù†Ø©","Ø­ÙˆØ§Ù„ÙŠ 25 Ø³Ù†Ø©","Ø­ÙˆØ§Ù„ÙŠ 40 Ø³Ù†Ø©"],correctIndex:0},
    {order:4,text:"Ù…Ù† Ø£Ø´Ù‡Ø± Ø£Ù„Ù‚Ø§Ø¨Ù‡ (Ø¹)ØŸ",choices:["Ø§Ù„Ø³Ø¬Ø§Ø¯","Ø§Ù„ØªÙ‚ÙŠ","Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ","Ø§Ù„Ø¨Ø§Ù‚Ø±"],correctIndex:1},
    {order:5,text:"Ø£ÙŠÙ† ÙƒØ§Ù† Ø§Ø³ØªØ´Ù‡Ø§Ø¯ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ø¯ (Ø¹)ØŸ",choices:["Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©","Ø³Ø§Ù…Ø±Ø§Ø¡","Ø¨ØºØ¯Ø§Ø¯","Ø§Ù„ÙƒÙˆÙØ©"],correctIndex:2},
    {order:6,text:"Ø£ÙŠÙ† Ù…Ø±Ù‚Ø¯ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ø¯ (Ø¹)ØŸ",choices:["Ø§Ù„Ù†Ø¬Ù","ÙƒØ±Ø¨Ù„Ø§Ø¡","Ø§Ù„ÙƒØ§Ø¸Ù…ÙŠØ©","Ù‚Ù…"],correctIndex:2},
    {order:7,text:"Ù…Ù† Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø°ÙŠ ØªÙ„Ø§Ù‡ ÙÙŠ Ø§Ù„Ø¥Ù…Ø§Ù…Ø©ØŸ",choices:["Ø§Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ Ø§Ù„Ù‡Ø§Ø¯ÙŠ (Ø¹)","Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø­Ø³Ù† Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ (Ø¹)","Ø§Ù„Ø¥Ù…Ø§Ù… Ø¬Ø¹ÙØ± Ø§Ù„ØµØ§Ø¯Ù‚ (Ø¹)","Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ù…Ù‡Ø¯ÙŠ (Ø¹Ø¬)"],correctIndex:0},
    {order:8,text:"Ù…Ù† Ø£Ø´Ù‡Ø± Ø£Ø¨Ù†Ø§Ø¦Ù‡ (Ø¹)ØŸ",choices:["Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ù‡Ø§Ø¯ÙŠ (Ø¹)","Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ù…Ù‡Ø¯ÙŠ (Ø¹Ø¬)","Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø±Ø¶Ø§ (Ø¹)","Ù„Ø§ Ø£Ø¨Ù†Ø§Ø¡ Ù„Ù‡"],correctIndex:0},
    {order:9,text:"Ø§Ø´ØªÙ‡Ø± Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ø¯ (Ø¹) ÙÙŠ Ø§Ù„Ù†Ø§Ø³ Ø¨Ù€â€¦",choices:["Ø§Ù„ÙƒØ±Ù… ÙˆØ§Ù„Ø¬ÙˆØ¯","Ø§Ù„Ø³ÙØ± ÙˆØ§Ù„ØªØ¬Ø§Ø±Ø©","Ø§Ù„Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø¹Ù† Ø§Ù„Ù†Ø§Ø³","Ø§Ù„Ù‚ØªØ§Ù„ Ø§Ù„Ù…Ø³ØªÙ…Ø±"],correctIndex:0},
    {order:10,text:"Ù…Ù…Ø§ Ø¹ÙØ±Ù Ø¨Ù‡ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ø¯ (Ø¹) ÙÙŠ Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø© ÙˆØ§Ù„Ø£Ø®Ù„Ø§Ù‚:",choices:["Ø§Ù„ØªÙˆØ§Ø¶Ø¹ ÙˆÙƒØ«Ø±Ø© Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø©","Ù‚Ù„Ø© Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø©","Ø§Ù„ØªØ±Ù ÙˆØ§Ù„Ø§Ù†Ø´ØºØ§Ù„ Ø¨Ø§Ù„Ø¯Ù†ÙŠØ§","Ø¹Ø¯Ù… Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ø§Ù„Ø¹Ù„Ù…"],correctIndex:0}
  ];

  for(const q of qs){
    await questionsRef.doc(String(q.order)).set(q, {merge:true});
  }
  alert("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ 10 Ø£Ø³Ø¦Ù„Ø© Ø¥Ù„Ù‰ Firestore");
}
window.seedQuestions=seedQuestions;

/* ================= Admin: Clear Answers ================= */
async function clearAnswers(){
  const snap = await answersRef.where("raceId","==",RACE_ID).get();
  const batch = db.batch();
  snap.forEach(doc=>batch.delete(doc.ref));
  await batch.commit();
  alert("âœ… ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬");
}
window.clearAnswers=clearAnswers;
</script>
</body>
</html>
