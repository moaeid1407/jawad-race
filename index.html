<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø³Ø¨Ø§Ù‚ Ø§Ù„Ø¬ÙˆØ§Ø¯ Ø§Ù„Ù…Ø¹Ø±ÙÙŠ</title>

<style>
body{
  margin:0;
  font-family: "Arial", sans-serif;
  background:#0b1e1b;
  color:#ffffff;
}
header{
  text-align:center;
  padding:20px;
  border-bottom:1px solid #1e3f39;
}
header h1{
  margin:0;
  font-size:36px;
}
header h3{
  margin:8px 0 0;
  font-weight:normal;
  color:#cfe9e3;
}
.container{
  display:flex;
  height:calc(100vh - 120px);
}
.panel{
  padding:15px;
  overflow:auto;
}
.left{width:25%;border-left:1px solid #1e3f39;}
.center{width:50%;text-align:center;}
.right{width:25%;border-right:1px solid #1e3f39;}

.card{
  background:#123a33;
  margin-bottom:8px;
  padding:8px;
  border-radius:6px;
  font-size:14px;
}

.timer{
  font-size:60px;
  margin:20px 0;
  color:#ffeb99;
}

button{
  padding:12px 20px;
  font-size:16px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  margin:6px;
}
.start{background:#1e7f6d;color:#fff;}
.pause{background:#555;color:#fff;}
.stop{background:#7a2b2b;color:#fff;}

.status{
  margin-top:15px;
  font-size:20px;
  color:#dff;
}

input{
  width:80%;
  padding:14px;
  font-size:18px;
  margin-top:20px;
  border-radius:6px;
  border:none;
  text-align:center;
}
.hidden{display:none;}
</style>
</head>

<body>

<header>
  <h1>ğŸ•Šï¸ Ø³Ø¨Ø§Ù‚ Ø§Ù„Ø¬ÙˆØ§Ø¯ Ø§Ù„Ù…Ø¹Ø±ÙÙŠ</h1>
  <h3>ØªØ­Øª Ø¥Ø´Ø±Ø§Ù Ù„Ø¬Ù†Ø© Ù…Ù†Ø§Ø¨Ø± Ø§Ù„Ù†ÙˆØ± Ø¨Ø§Ù„Ø¬ÙØ±</h3>
</header>

<div class="container">

  <!-- Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙˆÙ† -->
  <div class="panel left">
    <h3>Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙˆÙ†</h3>
    <div id="players"></div>
  </div>

  <!-- Ø§Ù„ÙˆØ³Ø· -->
  <div class="panel center">

    <div id="hostControls">
      <button class="stop" onclick="closeJoin()">â›” Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
      <button class="pause" onclick="togglePause()">â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù / Ø§Ø³ØªØ¦Ù†Ø§Ù</button>
      <button class="start" onclick="startRace()">â–¶ï¸ Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø¨Ø§Ù‚</button>
    </div>

    <div class="timer" id="globalTimer">00:00</div>

    <div class="status" id="statusText">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø¨Ø§Ù‚</div>

    <div id="joinBox">
      <input id="playerName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ ÙÙ‚Ø·">
      <div class="status">Ù„Ø§ ØªØ¶ØºØ· Ø§Ø¨Ø¯Ø£ Ø­ØªÙ‰ ØªØ¹Ù„Ù† Ø§Ù„Ù…Ù†ØµÙ‘Ø©</div>
    </div>

  </div>

  <!-- Ø§Ù„ØªØ±ØªÙŠØ¨ -->
  <div class="panel right">
    <h3>ğŸ† Ø§Ù„ØªØ±ØªÙŠØ¨</h3>
    <div id="ranking"></div>
  </div>

</div>

<script>
let joiningOpen = true;
let started = false;
let paused = false;
let startTime = 0;
let timerInterval = null;

let players = [];
let results = [];

function renderPlayers(){
  const box = document.getElementById("players");
  box.innerHTML = "";
  players.forEach(p=>{
    box.innerHTML += `<div class="card">${p}</div>`;
  });
}

function closeJoin(){
  joiningOpen = false;
  document.getElementById("statusText").innerText = "ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ³Ø¬ÙŠÙ„";
}

function startRace(){
  if(started) return;
  started = true;
  startTime = Date.now();
  document.getElementById("statusText").innerText = "Ø§Ù„Ø³Ø¨Ø§Ù‚ Ø¬Ø§Ø±Ù Ø§Ù„Ø¢Ù†";

  timerInterval = setInterval(()=>{
    if(paused) return;
    let t = Math.floor((Date.now() - startTime)/1000);
    let m = String(Math.floor(t/60)).padStart(2,"0");
    let s = String(t%60).padStart(2,"0");
    document.getElementById("globalTimer").innerText = m + ":" + s;
  },1000);
}

function togglePause(){
  paused = !paused;
  document.getElementById("statusText").innerText =
    paused ? "â¸ï¸ Ø§Ù„Ø³Ø¨Ø§Ù‚ Ù…ØªÙˆÙ‚Ù Ù…Ø¤Ù‚ØªÙ‹Ø§" : "â–¶ï¸ Ø§Ù„Ø³Ø¨Ø§Ù‚ Ù…Ø³ØªÙ…Ø±";
}

// Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…
document.getElementById("playerName").addEventListener("keypress",function(e){
  if(e.key==="Enter" && joiningOpen){
    let name = this.value.trim();
    if(name.length < 6) return;
    players.push(name);
    this.value="";
    renderPlayers();
  }
});
</script>

</body>
</html>
